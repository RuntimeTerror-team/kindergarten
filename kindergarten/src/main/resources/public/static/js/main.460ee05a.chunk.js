(this["webpackJsonpkindergarten-ui"]=this["webpackJsonpkindergarten-ui"]||[]).push([[0],{59:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(0),a=n.n(s),c=n(25),o=n.n(c),i=n(9),u=n(2),l=n(11),d=n(26),h=n(30),j=n(29),m=n(27),b=n.n(m),p=function(e){return Object(r.jsx)("div",{className:"row h-100 justify-content-center align-items-center",children:Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Prisijungimas"}),Object(r.jsxs)("form",{className:"form",onSubmit:e.onSubmit,children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"username",children:"Prisijungimo vardas: "}),Object(r.jsx)("input",{className:"form-control ",id:"username",value:e.username,onChange:e.onUsernameChange,name:"username",placeholder:"Prisijungimo vardas"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"password",className:"control-label",children:"Slapta\u017eodis: "}),Object(r.jsx)("input",{className:"form-control",type:"password",id:"password",value:e.password,onChange:e.onPasswordChange,name:"password",placeholder:"Slapta\u017eodis"})]}),Object(r.jsx)("button",{className:"btn btn-primary",children:"Prisijungti"})]})]})})},g=a.a.createContext(null),v=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleChangeUsername=function(t){t.preventDefault(),e.setState({username:t.target.value})},e.handleChangePassword=function(t){t.preventDefault(),e.setState({password:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n="",r=t.target.username.value,s=t.target.password.value;console.log("Password from user: "+s),b.a.get("".concat("/kindergarten","/api/users/").concat(r)).then((function(t){var r=t.data.password;n=t.data.role,console.log("Password from back: "+r),console.log("Is equal?: "+(r===s)),console.log("Role from back: "+n),s===r&&(e.context.userService.setCurrentUser(t.data.username),e.context.userService.setUserRole(n),e.context.userService.updateCurrentUser(),e.context.userService.updateUserRole())})).then((function(){console.log("User's username: "+e.context.userService.getCurrentUser()),console.log("User's role: "+e.context.userService.getUserRole()),"ADMIN"===n&&e.props.history.push("/admin")})).catch((function(e){return console.log(e)})),e.setState({username:""}),e.setState({password:""})},e.state={username:"",password:""},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)(p,{username:this.state.username,password:this.state.password,onSubmit:this.handleSubmit,onUsernameChange:this.handleChangeUsername,onPasswordChange:this.handleChangePassword})}}]),n}(s.Component);v.contextType=g;var x=Object(u.f)(v),f=function(){var e=Object(s.useContext)(g).userService;return Object(r.jsx)("div",{children:"ADMIN"===e.getUserRole()?Object(r.jsx)("h1",{children:"Admin page"}):Object(r.jsx)("h1",{children:"Access denied"})})},O=function(){return Object(r.jsx)("div",{children:Object(r.jsx)(i.b,{className:"nav-link",to:"/login",children:Object(r.jsx)("h1",{children:"Administratorius"})})})};var w=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{exact:!0,path:"/",component:O}),Object(r.jsx)(u.a,{exact:!0,path:"/admin",component:f}),Object(r.jsx)(u.a,{exact:!0,path:"/login",component:x})]}),e.children]})},U=function e(){var t=this;Object(l.a)(this,e),this.getCurrentUser=function(){return t._currentUser},this.setCurrentUser=function(e){t._currentUser=e},this.getUserRole=function(){return t._userRole},this.setUserRole=function(e){t._userRole=e},this.updateCurrentUser=function(){},this.updateUserRole=function(){},this._currentUser="",this._userRole=""};n(58);document.title="Kindergarten App";var S=new U;o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(i.a,{basename:"/kindergarten",children:Object(r.jsx)(g.Provider,{value:{userService:S},children:Object(r.jsx)(w,{})})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.460ee05a.chunk.js.map