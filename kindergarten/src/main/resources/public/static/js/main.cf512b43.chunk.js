(this["webpackJsonpkindergarten-ui"]=this["webpackJsonpkindergarten-ui"]||[]).push([[0],{59:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(0),a=n.n(s),c=n(25),i=n.n(c),o=n(10),u=n(2),l=n(11),d=n(26),h=n(30),j=n(29),m=n(27),p=n.n(m),b=function(e){return Object(r.jsx)("div",{className:"row h-100 justify-content-center align-items-center",children:Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Prisijungimas"}),Object(r.jsxs)("form",{className:"form",onSubmit:e.onSubmit,children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"username",children:"Prisijungimo vardas: "}),Object(r.jsx)("input",{className:"form-control ",id:"username",value:e.username,onChange:e.onUsernameChange,name:"username",placeholder:"Prisijungimo vardas"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"password",className:"control-label",children:"Slapta\u017eodis: "}),Object(r.jsx)("input",{className:"form-control",type:"password",id:"password",value:e.password,onChange:e.onPasswordChange,name:"password",placeholder:"Slapta\u017eodis"})]}),Object(r.jsx)("button",{className:"btn btn-primary",children:"Prisijungti"})]})]})})},v=a.a.createContext(null),g=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleChangeUsername=function(t){t.preventDefault(),e.setState({username:t.target.value})},e.handleChangePassword=function(t){t.preventDefault(),e.setState({password:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n="",r=t.target.username.value,s=t.target.password.value;p.a.get("".concat("http://localhost:8080/kindergarten","/api/users/").concat(r)).then((function(t){var r=t.data.password;n=t.data.role,s===r&&(e.context.userService.setCurrentUser(t.data.username),e.context.userService.setUserRole(n),e.context.userService.updateCurrentUser(),e.context.userService.updateUserRole())})).then((function(){"ADMIN"===e.context.userService.getUserRole()&&e.props.history.push("/admin")})).catch((function(e){return console.log(e)})),e.setState({username:""}),e.setState({password:""})},e.state={username:"",password:""},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)(b,{username:this.state.username,password:this.state.password,onSubmit:this.handleSubmit,onUsernameChange:this.handleChangeUsername,onPasswordChange:this.handleChangePassword})}}]),n}(s.Component);g.contextType=v;var x=Object(u.f)(g),f=function(){var e=Object(s.useContext)(v).userService;return Object(r.jsx)("div",{children:"ADMIN"===e.getUserRole()?Object(r.jsx)("h1",{children:"Admin page"}):Object(r.jsx)("h1",{children:"Access denied"})})};var O=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{exact:!0,path:"/",component:x}),Object(r.jsx)(u.a,{exact:!0,path:"/admin",component:f})]}),e.children]})},w=function e(){var t=this;Object(l.a)(this,e),this.getCurrentUser=function(){return t._currentUser},this.setCurrentUser=function(e){t._currentUser=e},this.getUserRole=function(){return t._userRole},this.setUserRole=function(e){t._userRole=e},this.updateCurrentUser=function(){},this.updateUserRole=function(){},this._currentUser="",this._userRole=""};n(58);document.title="Kindergarten App";var S=new w;i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(o.a,{basename:"/kindergarten",children:Object(r.jsx)(v.Provider,{value:{userService:S},children:Object(r.jsx)(O,{})})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.cf512b43.chunk.js.map